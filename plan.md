# ART 프로젝트 개발 계획 및 진행 상황 (2025-06-21 최신)

## 1. 프로젝트 개요 및 목표

- **주요 목표**: 암호화폐 트레이딩을 위한 ML 기반 예측 모델 및 트레이딩 전략 개발
- **핵심 목표**: 코드 안정성, 유지보수성, 확장성 향상 및 실제 트레이딩에 적용 가능한 성과 도출
- **현재 페이즈**: 모델 학습/평가 파이프라인 리팩터링 및 안정성 확보, 성능 개선

## 2. 개발 히스토리 및 주요 이슈 해결 과정

### 프로젝트 구조 및 파이프라인

- **파이프라인 설계 및 구현**: 데이터 수집, 피처 엔지니어링, 라벨링, 모델 학습/평가, 백테스트 등 전체 ML 트레이딩 파이프라인
- **모듈화 및 클래스 기반 구현**: 기존 train_model.py 파일에서 발생한 반복적 오류 해결을 위한 코드 재구성
- **주요 모듈 구성**:
  - `base.py`: 기본 클래스 및 인터페이스 정의
  - `data_loader.py`: 데이터 로딩 및 전처리
  - `training.py`: 모델 학습 및 파라미터 관리
  - `evaluation.py`: 모델 평가 및 성능 분석
  - `utils.py`: 유틸리티 함수
  - `train_model_new.py`: 메인 학습 스크립트

### 데이터 및 피처 관리

- **데이터/피처 파이프라인 동기화**: train/test 구간(2017/2018–2023, 2024–2025.6)에서 feature/label 구조 일치 확보
- **NaN 처리 개선**: test set feature matrix 생성 시 train 마지막 데이터를 버퍼로 활용하여 NaN 문제 해결
- **클래스 불균형 개선**: triple-barrier labeling 파라미터 조정 및 샘플링 기법 적용

### 주요 오류 해결 과정

- **KeyError('result_path')**: setup_paths 함수에서 경로 반환 누락으로 인한 오류 해결 및 방어적 코드 추가
- **XGBoost early_stopping_rounds 중복 오류**: 모델 파라미터 중복 설정 문제 해결
  1. training.py에서 fit_params에 추가하는 코드 제거
  2. MODEL_PARAMS와 코드 내 중복 설정 조정
  3. XGBoost 모델 학습 시 검증 데이터셋 분할 및 평가 세트 구성

## 3. 현재 작업 상태

### 완료된 작업

- [x] **데이터 파이프라인**:
  - [x] 피처 엔지니어링 스크립트 구현
  - [x] 삼중 장벽 레이블링 구현 및 결과 저장
  - [x] 학습/백테스트 기간 분리 변수화

- [x] **모델 학습/평가 파이프라인 리팩터링**:
  - [x] train_model.py 코드 구조 분석
  - [x] 리팩터링 설계안 도출 및 문서화
  - [x] data_loader.py 구현 및 테스트
  - [x] training.py 구현 및 테스트
  - [x] utils.py 구현
  - [x] train_model_new.py (신규) 구현
  - [x] setup_paths 반환 누락 오류 수정
  - [x] KeyError('result_path') 방어적 코드 및 디버깅 추가
  - [x] XGBoost 최종 학습 단계 검증 데이터셋 분할 및 eval_set 추가
  - [x] XGBoost 학습 파라미터 중복 오류 수정

- [x] **모델/피처 분석**:
  - [x] 특성 중요도 분석 및 주요 피처 선정
  - [x] 혼동행렬, 정밀도/재현율, 실수 유형 분석 자동화

### 진행 중인 작업

- [~] 모델 평가 지표(정밀도, 재현율, F1 등) 분석 및 개선
- [x] 주요 함수/클래스 단위 테스트 작성 (완료)
- [~] 전체 파이프라인 통합 테스트 및 검증

### 예정된 작업

- [ ] 백테스트 프레임워크 구축 및 전략 검증

## 4. 향후 개발 계획 및 전략 로드맵

### 단기 계획 (2025-06-21 기준)

1. **모델 성능 개선**:
   - 클래스 불균형 개선(샘플 가중치, 오버샘플링 등) 실험
   - 피처 중요도 분석 및 신규 피처 설계
   - 하이퍼파라미터 튜닝(GridSearch, Optuna 등)

2. **트레이딩 전략 고도화**:
   - 전략 로직 개선(최소 홀딩 기간, 동적 손절/익절)
   - 레버리지 전략 개선(신뢰도에 따른 동적 레버리지)
   - 위험 관리 규칙 적용(쿨다운 등)

3. **테스트 및 검증**:
   - 단위 테스트 완료
   - 통합 테스트 및 실전 환경 대비 검증
   - 개선된 모델/전략으로 백테스트 실행

### 중장기 계획

1. **다중 시간 프레임(Multi-Timeframe) 분석 강화**:
   - 일봉/4시간봉/1시간봉 데이터 결합
   - 시간대별 특성 추출 및 모델 학습

2. **앙상블 모델링 및 고급 ML 기법 적용**:
   - XGBoost, LightGBM, Neural Networks 등 앙상블
   - 딥러닝 기반 시계열 예측 모델 실험

3. **실전 운영 시스템 구축**:
   - 자동 트레이딩 인터페이스 구현
   - 실시간 모니터링 및 알림 시스템
   - 위험 관리 자동화 시스템

## 5. 현재 집중 목표

**전체 파이프라인 통합 테스트 및 검증**:
- 리팩터링된 모델 학습/평가 파이프라인의 안정성 검증
- 다양한 조건에서의 파이프라인 테스트 및 오류 케이스 방어 코드 보강
- 모델 성능 지표 분석 및 개선 포인트 도출

---

_마지막 업데이트: 2025년 6월 21일_
